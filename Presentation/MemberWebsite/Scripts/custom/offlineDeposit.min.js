(function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};ko.validation.init({registerExtenders:!0},!0);this.OfflineDepositModel=function(){function t(){this.submitOfflineDeposit=n(this.submitOfflineDeposit,this);var t,i;t={Email:"Email",SMS:"SMS"};this.bankAccount=ko.observable();this.amount=ko.observable("").extend({formatDecimal:2,validatable:!0,required:!0,min:{message:"Entered amount must be greater than 0.",params:.01},max:{message:"Entered amount is bigger than allowed.",params:2147483647}});this.remarks=ko.observable("");this.bonusRadioValue=ko.observable();this.offlineDepositBonusCode=ko.observable();this.notificationMethods=ko.observableArray(function(){var n=[];for(i in t)n.push(i);return n}());this.notificationMethod=ko.observable(t.Email);this.offlineDepositRequestInProgress=ko.observable(!1);this.offlineDepositSuccess=ko.observable(location.hash==="#offlineDeposit/success");this.offlineDepositErrors=ko.observableArray([]);setTimeout(function(){return $("[data-bind*='value: offlineDepositBonusCode']").focus(function(){return $(this).parents(".row").find("[type=radio]").prop("checked",!0).change()})})}return t.prototype.submitOfflineDeposit=function(n){if(this.offlineDepositSuccess(!1),this.offlineDepositErrors([]),!this.amount.isValid()){this.offlineDepositErrors.push(i18n.t("app:payment.deposit.depositFailed")+i18n.t(this.amount.error));return}return this.offlineDepositRequestInProgress(!0),$.postJson("/api/offlineDeposit",{BankAccountId:this.bankAccount(),Amount:this.amount(),NotificationMethod:this.notificationMethod(),PlayerRemarks:this.remarks(),BonusCode:this.bonusRadioValue()==="none"?null:this.offlineDepositBonusCode()}).done(function(){return function(){return n!=null&&typeof n=="function"?n():(location.href="#offlineDeposit/success",location.reload())}}(this)).fail(function(n){return function(t){return n.fail(JSON.parse(t.responseText))}}(this)).always(function(n){return function(){return n.offlineDepositRequestInProgress(!1)}}(this))},t.prototype.fail=function(n){var t,i,r,f,u;if(i="",IsJsonString(n.message)?(t=JSON.parse(n.message),i=i18n.t(t.text,t.variables)):i=i18n.t(n.message),n.unexpected||n.message)return this.offlineDepositErrors.push(i18n.t("app:payment.deposit.depositFailed")+i);for(u=n.errors,r=0,f=u.length;r<f;r++)t=u[r],this.offlineDepositErrors.push(t);if(n.errors.length===0&&n.message)return this.offlineDepositErrors.push(i18n.t("app:payment.deposit.depositFailed")+i)},t}()}).call(this);