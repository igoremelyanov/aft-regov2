(function(){var t,i,r,n=function(n,t){return function(){return n.apply(t,arguments)}};t=function(){function t(){this.onErrorHandler=n(this.onErrorHandler,this);this.validate=n(this.validate,this);this.createOnlineDepositObject=n(this.createOnlineDepositObject,this);this.skipBonus=n(this.skipBonus,this);this.submitRequest=n(this.submitRequest,this);this.selectBonus=n(this.selectBonus,this);this.validateBonusCode=n(this.validateBonusCode,this);this.submitBonus=n(this.submitBonus,this);this.bonuscode=ko.observable().extend({validator:!0});this.selectedBonusId=ko.observable();this.depositRequestInProgress=ko.observable(!1)}var i;return t.prototype.submitBonus=function(){return console.log("submit bonus")},t.prototype.validateBonusCode=function(){return this.bonuscode.setError(!1),this.validate("/api/ValidateFirstDepositBonus",{depositAmount:$("#deposit-amount").text(),bonusCode:this.bonuscode()},function(){return function(n){return redirect("/home/registerstep3?bonusCode="+n.bonus.code)}}(this))},t.prototype.selectBonus=function(n,t){var i;return i=$(t.currentTarget).find("#bonus-id").text(),$(t.currentTarget).hasClass("disable")?void 0:$(t.currentTarget).hasClass("selected")?($(t.currentTarget).removeClass("selected"),this.selectedBonusId("")):($("#bonusList .col-sm-3").removeClass("selected"),$(t.currentTarget).addClass("selected"),this.selectedBonusId(i))},t.prototype.submitRequest=function(){var n;if(!this.depositRequestInProgress())return n=this.createOnlineDepositObject(this.selectedBonusId()),n.submitOnlineDeposit(),this.depositRequestInProgress(!0)},t.prototype.skipBonus=function(){var n;if(!this.depositRequestInProgress())return n=this.createOnlineDepositObject(""),n.submitOnlineDeposit(),this.depositRequestInProgress(!0)},t.prototype.createOnlineDepositObject=function(n){var t=new OnlineDepositModel("/home/registerstep4","/home/registerstep2");t.onlineAmount($("#deposit-amount").text());return t.onlineDepositBonusId(n)},t.prototype.validate=function(n,t,i){return $.postJson(n,t).done(function(){return function(n){return i(n)}}(this)).fail(function(n){return function(t){return n.onErrorHandler(t)}}(this))},t.prototype.onErrorHandler=function(n){var f,r,e,o,t,s,u,i;for(o=JSON.parse(n.responseText),u=o.errors,i=[],t=0,s=u.length;t<s;t++)f=u[t],e=f.fieldName,r=this[e.toLowerCase()],r?i.push(r.setError(!0)):i.push(void 0);return i},i=new t,ko.applyBindings(i,document.getElementById("register-wrapper")),$("#bonusList .col-sm-3").first().click(),t}();r=function(n){return n=n.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,"),n.replace(".00","")};i=function(n){return n=n.replace(",","").replace(".00",""),Math.floor(n)};ko.extenders.validator=function(n){return n.hasError=ko.observable(!1),n.messages=ko.observableArray([]),n.setError=function(){return function(t){return n.hasError(t),t?void 0:n.messages([])}}(this),n.subscribe(function(){return function(){return n.setError(!1)}}(this)),n}}).call(this);