(function(){var t,n=function(n,t){return function(){return n.apply(t,arguments)}};t=function(){function t(){this.toggleTab=n(this.toggleTab,this);this.claimRedemption=n(this.claimRedemption,this);this.fetchRedemptions=n(this.fetchRedemptions,this);this.messages=ko.observableArray();this.redemptions=ko.observableArray();this.requestInProgress=ko.observable(!1);this.fetchingRedemptions=ko.observable(!1);this.fetchRedemptions();this.shownTab=ko.observable("claimBonus")}var i;return t.prototype.fetchRedemptions=function(){return this.fetchingRedemptions(!0),$.getJson("/api/GetBonusRedemptions").done(function(n){return function(t){return n.fetchingRedemptions(!1),n.redemptions(t.redemptions),t.redemptions.length===0?n.messages([i18n.t("app:claimBonus.noBonusToClaim")]):void 0}}(this)).fail(function(n){var t,i;return i=JSON.parse(n.responseText),this.messages([((t=i.errors[0])!=null?t.message:void 0)||i18n.t("app:common.unexpectedError")])})},t.prototype.claimRedemption=function(n){return this.requestInProgress(!0),this.messages([]),$.postJson("/api/ClaimBonusReward",{RedemptionId:n.id}).done(function(t){return function(){return t.redemptions.pop(n),t.messages([i18n.t("app:claimBonus.redemptionClaimedSuccessfully")])}}(this)).fail(function(n){var t;return t=JSON.parse(n.responseText),t.unexpected?this.messages([i18n.t("app:common.unexpectedError")]):this.messages([t.errors[0].message])}).always(function(n){return function(){return n.requestInProgress(!1)}}(this))},t.prototype.toggleTab=function(){var n;return n=event.target.hash.substr(1),this.shownTab(n)},i=new t,ko.applyBindings(i,document.getElementById("claim-bonus-wrapper")),t}()}).call(this);
//# sourceMappingURL=claimBonusReward.min.js.map
