(function(){var n,t,i=function(n,t){return function(){return n.apply(t,arguments)}};n=function(){function n(){this.submitRegistration=i(this.submitRegistration,this);this.firstName=ko.observable("").extend({validatable:!0});this.lastName=ko.observable("").extend({validatable:!0});this.email=ko.observable("").extend({validatable:!0});this.phoneNumber=ko.observable("").extend({validatable:!0});this.mailingAddressLine1=ko.observable("").extend({validatable:!0});this.mailingAddressCity=ko.observable().extend({validatable:!0});this.mailingAddressStateProvince=ko.observable().extend({validatable:!0});this.mailingAddressPostalCode=ko.observable("").extend({validatable:!0});this.countryCode=ko.observable().extend({validatable:!0});this.currencyCode=ko.observable().extend({validatable:!0});this.captcha=ko.observable().extend({validatable:!0});this.captchaCheck=ko.observable().extend({validatable:!0});this.cultureCode=ko.observable().extend({validatable:!0});this.username=ko.observable("").extend({validatable:!0});this.password=ko.observable("").extend({validatable:!0});this.passwordConfirm=ko.observable("").extend({validatable:!0});this.dayOB=ko.observable(0).extend({validatable:!0});this.monthOB=ko.observable(0).extend({validatable:!0});this.yearOB=ko.observable(0).extend({validatable:!0});this.title=ko.observable().extend({validatable:!0});this.contactPreference=ko.observable().extend({validatable:!0});this.securityQuestionId=ko.observable().extend({validatable:!0});this.securityAnswer=ko.observable().extend({validatable:!0});this.dateOfBirth=ko.computed(function(n){return function(){return n.yearOB()+"/"+n.monthOB()+"/"+n.dayOB()}}(this)).extend({validatable:!0});this.physicalAddressLine1=ko.computed(function(n){return function(){return n.mailingAddressLine1()}}(this)).extend({validatable:!0});this.physicalAddressCity=ko.computed(function(n){return function(){return n.mailingAddressPostalCode()}}(this)).extend({validatable:!0});this.physicalAddressPostalCode=ko.computed(function(n){return function(){return n.mailingAddressPostalCode()}}(this)).extend({validatable:!0});this.brandId=ko.computed(function(){return function(){return"00000000-0000-0000-0000-000000000138"}}(this)).extend({validatable:!0});this.cultureCode=ko.computed(function(){return function(){return findCookieValue("CultureCode")}}(this)).extend({validatable:!0});this.gender=ko.computed(function(){return function(){return $('input[name="Gender"]:checked').val()}}(this)).extend({validatable:!0});this.over18=ko.observable(!1);this.acceptTerms=ko.observable(!1)}return n.prototype.submitRegistration=function(){var n;return n=$("#register-step1-form").serializeArray(),n.push({name:"Gender",value:$('input[name="Gender"]:checked').val()},{name:"PhoneNumber",value:$("#phone-number").intlTelInput("getNumber").replace("+","00")},{name:"CurrencyCode",value:"RMB"},{name:"CountryCode",value:"CN"}),$.ajax({url:"/api/ValidateRegisterInfo",type:"post",data:$.param(n)}).success(function(t){return function(i){return i.hasError?$.each(i.errors,function(n){var r;return r=t[n],r?(r.error=i18n.t("apiResponseCodes."+i.errors[n]),r.__valid__(!1),r.isModified(!0)):alert(i.errors[n])}):$.ajax({url:"/api/Register",type:"post",data:$.param(n)}).success(function(){return redirect("/Home/RegisterStep2")}).fail(function(){return alert("Unexpected error occured.")})}}(this))},n}();t=new n;ko.applyBindings(t,document.getElementById("register-wrapper"))}).call(this);