// Generated by IcedCoffeeScript 108.0.9
(function() {
  define(function(require) {
    var AceEditor, i18n;
    require("../Scripts/ace-editor/ace");
    i18n = require("i18next");
    return AceEditor = (function() {
      function AceEditor(editorId, editorObservable, isEditable, isSingleLine) {
        var defaultValue, editor;
        if (isEditable == null) {
          isEditable = true;
        }
        if (isSingleLine == null) {
          isSingleLine = false;
        }
        editor = ace.edit(editorId);
        editor.setTheme("ace/theme/chrome");
        editor.getSession().setUseWorker(false);
        editor.setShowPrintMargin(false);
        editor.setFontSize(14);
        editor.setOptions({
          highlightActiveLine: false
        });
        defaultValue = editorObservable();
        if (defaultValue) {
          editor.setValue(defaultValue, -1);
        }
        if (isEditable) {
          editor.getSession().on("change", (function(_this) {
            return function() {
              return editorObservable(editor.getValue());
            };
          })(this));
          editor.on("paste", (function(_this) {
            return function(e) {
              var maxPasteLineCount, pasteLineCount;
              pasteLineCount = e.text.split(/\r\n|\r|\n/).length;
              maxPasteLineCount = 10000;
              if (pasteLineCount > maxPasteLineCount) {
                e.text = "";
                return alert(i18n.t("app:common.pasteExceedsLineLimit"));
              }
            };
          })(this));
        } else {
          editor.setReadOnly(true);
        }
        if (isSingleLine) {
          editor.setOptions({
            maxLines: 1
          });
          editor.on("paste", function(e) {
            return e.text = e.text.replace(/[\r\n]+/g, " ");
          });
          editor.commands.bindKey("Enter|Shift-Enter", "null");
        } else {
          editor.getSession().setMode("ace/mode/html");
        }
      }

      return AceEditor;

    })();
  });

}).call(this);
