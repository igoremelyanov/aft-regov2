(function(){var n={}.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};define(function(n){var e,r,u,i,f;return n("controls/grid"),u=n("nav"),r=n("i18next"),e=n("durandal/app"),i=n("security/security"),f=n("payments/settings/status-dialog"),function(n){function e(){var n;e.__super__.constructor.apply(this,arguments);this.isAddAllowed=ko.observable(i.isOperationAllowed(i.permissions.create,i.categories.paymentSettings));this.isEditAllowed=ko.observable(i.isOperationAllowed(i.permissions.update,i.categories.paymentSettings));this.isActivateAllowed=ko.observable(i.isOperationAllowed(i.permissions.activate,i.categories.paymentSettings));this.isDeactivateAllowed=ko.observable(i.isOperationAllowed(i.permissions.deactivate,i.categories.paymentSettings));this.noRecordsFound=ko.observable(!1);this.rowId=ko.observable();this.selectedRowId=ko.observable();this.brandNameSearchPattern=ko.observable();this.Search=ko.observable();this.canActivate=ko.observable(!1);this.canDeactivate=ko.observable(!1);n=ko.observableArrays();this.brands=n[0];this.currencies=n[1];this.licensees=n[2];this.paymentTypes=n[3];this.paymentMethods=n[4];this.statuses=n[5];this.vipLevels=ko.observable({})}return t(e,n),e.prototype.reloadGrid=function(){return $("#payment-settings-grid").trigger("reload")},e.prototype.rowChange=function(n){return this.canActivate(n.data.Enabled==="Inactive"),this.canDeactivate(n.data.Enabled==="Active"),this.noRecordsFound($("#payment-settings-grid")[0].gridParam("reccount")===0)},e.prototype.activate=function(){return e.__super__.activate.apply(this,arguments),$.get("/PaymentSettings/LicenseesList").done(function(n){return function(t){var u,i,f,r;for(r=[],i=0,f=t.length;i<f;i++)u=t[i],r.push(n.licensees.push(u));return r}}(this)),$.get("/PaymentSettings/BrandsList").done(function(n){return function(t){var u,i,f,r;for(r=[],i=0,f=t.length;i<f;i++)u=t[i],r.push(n.brands.push(u));return r}}(this)),$.get("/PaymentSettings/PaymentTypesList").done(function(n){return function(t){var u,i,f,r;for(r=[],i=0,f=t.length;i<f;i++)u=t[i],r.push(n.paymentTypes.push(u));return r}}(this)),$.get("/PaymentSettings/VipLevelList").done(function(n){return function(t){var r,i,f,u;for(u=[],i=0,f=t.length;i<f;i++)r=t[i],u.push(n.vipLevels()[r.Id]=r.Name);return u}}(this)),$.get("/PaymentSettings/PaymenMethodsList").done(function(n){return function(t){var u,i,f,r;for(r=[],i=0,f=t.length;i<f;i++)u=t[i],r.push(n.paymentMethods.push(u));return r}}(this)),$.get("/PaymentSettings/CurrencyList").done(function(n){return function(t){var u,i,f,r;for(r=[],i=0,f=t.length;i<f;i++)u=t[i],r.push(n.currencies.push(u));return r}}(this)),$.get("/PaymentSettings/StatusesList").done(function(n){return function(t){var u,i,f,r;for(r=[],i=0,f=t.length;i<f;i++)u=t[i],r.push(n.statuses.push(u));return r}}(this))},e.prototype.openAddTab=function(){return u.open({path:"payments/settings/details",title:r.t("app:payment.settings.newSettings")})},e.prototype.openEditTab=function(){if(this.rowId()!=null)return u.open({path:"payments/settings/details",title:r.t("app:payment.settings.editSettings"),data:{id:this.rowId(),editMode:!0}})},e.prototype.openViewTab=function(){if(this.rowId()!=null)return u.open({path:"payments/settings/details",title:r.t("app:payment.settings.viewSettings"),data:{id:this.rowId(),editMode:!1}})},e.prototype.openActivateDialog=function(){return f.show(this.canDeactivate(),this.rowId())},e.prototype.openDeactivateDialog=function(){return f.show(this.canDeactivate(),this.rowId())},e}(n("vmGrid"))})}).call(this);