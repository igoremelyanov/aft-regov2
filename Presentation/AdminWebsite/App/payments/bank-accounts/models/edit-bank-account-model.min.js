(function(){var n={}.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};define(function(n){var e,i,f,r,o,s,u;return r=n("i18next"),s=n("datePicker"),f=n("config"),i=n("payments/bank-accounts/common"),u=n("regular-expression"),e=n("base/base-model"),o=n("moment"),function(n){function e(n){var t;e.__super__.constructor.apply(this,arguments);this.submitted=ko.observable();this.id=this.makeField(n.id);this.isActive=this.makeField(n.isActive);this.licenseeId=this.makeField().extend({required:!0});this.licenseeName=this.makeField(n.licenseeName);this.brandId=this.makeField().extend({required:!0});this.brandName=this.makeField(n.brandName);this.bankId=ko.observable(n.bankId).extend({required:!0});this.bankAccountAccountTypeId=ko.observable(n.bankAccountAccountTypeId).extend({required:!0});this.bankAccountAccountTypes=this.makeSelect();this.bankName=this.makeField(n.bankName);this.banks=this.makeSelect();this.currencyCode=this.makeField(n.currencyCode).extend({required:!0});this.remarks=this.makeField(n.remarks).extend({required:!0,maxLength:i.remarksMaxLength});this.bankAccountId=this.makeField(n.bankAccountId).extend({required:!0,maxLength:i.bankIdMaxLength,pattern:{message:r.t("bankAccounts.validation.AlphanumericDashUnderscoreSpace"),params:u.alphaNumericDashUnderscoreSpace}});this.bankAccountNumber=this.makeField(n.bankAccountNumber).extend({required:!0,maxLength:i.bankAccountNumberMaxLength,pattern:{message:r.t("bankAccounts.validation.AlphanumericDashUnderscoreSpace"),params:u.alphaNumericDashUnderscoreSpace}});this.bankAccountName=this.makeField(n.bankAccountName).extend({required:!0,maxLength:i.bankAccountNameMaxLength,pattern:{message:r.t("bankAccounts.validation.AlphanumericDashUnderscoreSpace"),params:u.alphaNumericDashUnderscoreSpace}});this.bankAccountProvince=this.makeField(n.bankAccountProvince).extend({required:!0,maxLength:i.bankAccountProvinceMaxLength,pattern:{message:r.t("bankAccounts.validation.AlphanumericDashUnderscoreSpace"),params:u.alphaNumericDashUnderscoreSpace}});this.bankAccountBranch=this.makeField(n.bankAccountBranch).extend({required:!0,maxLength:i.bankAccountBranchMaxLength,pattern:{message:r.t("bankAccounts.validation.AlphanumericDashUnderscoreSpace"),params:u.alphaNumericDashUnderscoreSpace}});this.supplierName=this.makeField(n.supplierName).extend({required:!0,maxLength:i.supplierNameMaxLength});this.contactNumber=this.makeField(n.contactNumber).extend({required:!0,maxLength:i.contactNumberMaxLength,pattern:{message:r.t("bankAccounts.validation.Numeric"),params:u.numeric}});this.usbCode=this.makeField(n.usbCode).extend({required:!0,maxLength:i.usbCodeMaxLength,pattern:{message:r.t("bankAccounts.validation.Alphanumeric"),params:u.alphaNumeric}});this.purchasedDate=this.makeField(n.purchasedDate).extend({required:!0});this.cardPurchasedDate=this.makeField();this.cardPurchasedDate.extend({validation:{validator:function(n){return function(){return o().diff(n.cardPurchasedDate())<0,!0}}(this),message:"Expiration Date is not valid."}});this.utilizationDate=this.makeField(n.utilizationDate).extend({required:!0});this.expirationDate=this.makeField(n.expirationDate).extend({required:!0});this.uploadId1FieldId=ko.observable("bank-account-upload-id-1");this.uploadId2FieldId=ko.observable("bank-account-upload-id-2");this.uploadId3FieldId=ko.observable("bank-account-upload-id-3");t="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMjAwIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2VlZSIvPjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE1MCIgeT0iMTAwIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjE5cHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+MzAweDIwMDwvdGV4dD48L3N2Zz4=";this.uploadId1Src=ko.observable();this.uploadId2Src=ko.observable();this.uploadId3Src=ko.observable();this.maxSize=4194304;this.idFrontImage=this.makeField().extend({validation:{validator:function(n){return function(){var t,i;return t=$("input#"+n.uploadId1FieldId())[0],t?(i=t?t.files[0]:void 0,i?i&&i.size<=n.maxSize:!0):!0}}(this),message:"Maximum file size is 4Mb."}});this.idBackImage=this.makeField().extend({validation:{validator:function(n){return function(){var t,i;return t=$("input#"+n.uploadId2FieldId())[0],t?(i=t?t.files[0]:void 0,i?i&&i.size<=n.maxSize:!0):!0}}(this),message:"Maximum file size is 4Mb."}});this.atmCardImage=this.makeField().extend({validation:{validator:function(n){return function(){var t,i;return t=$("input#"+n.uploadId3FieldId())[0],t?(i=t?t.files[0]:void 0,i?i&&i.size<=n.maxSize:!0):!0}}(this),message:"Maximum file size is 4Mb."}});this.file1Src=ko.computed(function(n){return function(){return n.idFrontImage()||n.uploadId1Src()}}(this));this.file1Src.extend({required:!0,validation:{validator:function(){return function(n){return n}}(this),message:"ID Front required",params:!0}});this.file2Src=ko.computed(function(n){return function(){return n.idBackImage()||n.uploadId2Src()}}(this));this.file2Src.extend({required:!0,validation:{validator:function(){return function(n){return n}}(this),message:"ID Back required",params:!0}});this.file3Src=ko.computed(function(n){return function(){return n.atmCardImage()||n.uploadId3Src()}}(this));this.file3Src.extend({required:!0,validation:{validator:function(){return function(n){return n}}(this),message:"ATM card required",params:!0}});this.licensees=this.makeSelect();this.brands=this.makeSelect();this.currencies=this.makeSelect();this.arr=ko.observableArray();$.ajax("BankAccounts/GetBankAccountTypes").done(function(t){return function(i){return t.bankAccountAccountTypes(i.bankAccountTypes),t.bankAccountAccountTypeId(n.bankAccountAccountTypeId)}}(this));$.ajax("/Licensee/Licensees?useFilter=false").done(function(t){return function(i){var r;return t.licensees(i.licensees),t.licenseeId(n.licenseeId),$.ajax({url:f.adminApi("Brand/Brands?useFilter=false&licensees="+n.licenseeId),context:t},r=t).done(function(i){return t.brands(i.brands),t.brandId(n.brandId),$.get("BankAccounts/GetBanks?brandId="+n.brandId).done(function(t){return r.banks(t.banks),r.bankId(n.bankId)}),$.ajax({url:f.adminApi("BrandCurrency/GetBrandCurrenciesWithNames?brandId="+n.brandId),context:t}).done(function(t){return this.currencies(t.currencyCodes),this.currencyCode(n.currencyCode),this.licenseeId.subscribe(function(n){return function(t){return n.licenseeId(t),$.ajax({url:f.adminApi("Brand/Brands?useFilter=false&licensees="+t),context:n}).done(function(n){return this.brands(n.brands)})}}(this)),this.brandId.subscribe(function(n){return function(t){return n.brandId(t),$.ajax({url:f.adminApi("BrandCurrency/GetBrandCurrenciesWithNames?brandId="+t),context:n}).done(function(n){return this.currencies(n.currencyCodes)}),$.get("BankAccounts/GetBanks?brandId="+t).done(function(n){return r.banks(n.banks)})}}(this))})})}}(this))}return t(e,n),e.prototype.makeFileInputSettings=function(n){return{style:"well",btn_choose:"Drop image or click to choose",no_file:"No File ...",droppable:!0,thumbnail:"fit",before_change:function(n){var t,i;return t=n[0],typeof t=="string"?/\.(jpe?g|png|gif)$/i.test(t)||-1:(i=$.trim(t.type),(i.length>0&&!/^image\/(jpe?g|png|gif)$/i.test(i)||i.length===0&&!/\.(jpe?g|png|gif)$/i.test(t.name))&&-1),!0},after_change:function(n,t){return alert(n),alert(t),!0},before_remove:function(){return n(""),!0}}},e.prototype.mapto=function(){var n;return n=["licensees","licenseeId","brands","currencies","bankAccountAccountTypes"],e.__super__.mapto.call(this,n)},e}(e)})}).call(this);