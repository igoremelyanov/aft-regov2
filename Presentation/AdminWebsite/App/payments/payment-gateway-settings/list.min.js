(function(){var n={}.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};define(function(n){var e,r,u,i,f;return n("controls/grid"),u=n("nav"),r=n("i18next"),e=n("durandal/app"),i=n("security/security"),f=n("payments/payment-gateway-settings/status-dialog"),function(n){function e(){var n;e.__super__.constructor.apply(this,arguments);this.isAddAllowed=ko.observable(i.isOperationAllowed(i.permissions.create,i.categories.paymentGatewaySettings));this.isEditAllowed=ko.observable(i.isOperationAllowed(i.permissions.update,i.categories.paymentGatewaySettings));this.isActivateAllowed=ko.observable(i.isOperationAllowed(i.permissions.activate,i.categories.paymentGatewaySettings));this.isDeactivateAllowed=ko.observable(i.isOperationAllowed(i.permissions.deactivate,i.categories.paymentGatewaySettings));this.noRecordsFound=ko.observable(!1);this.rowId=ko.observable();this.selectedRowId=ko.observable();this.brandNameSearchPattern=ko.observable();this.Search=ko.observable();this.canActivate=ko.observable(!1);this.canDeactivate=ko.observable(!1);this.canEdit=ko.observable(!1);n=ko.observableArrays();this.brands=n[0];this.licensees=n[1];this.paymentGateways=n[2];this.statuses=n[3];this.vipLevels=ko.observable({})}return t(e,n),e.prototype.reloadGrid=function(){return $("#payment-gateway-settings-grid").trigger("reload")},e.prototype.rowChange=function(n){return this.canActivate(n.data.Status==="Inactive"),this.canDeactivate(n.data.Status==="Active"),this.canEdit(n.data.Status==="Inactive"),this.noRecordsFound($("#payment-gateway-settings-grid")[0].gridParam("reccount")===0)},e.prototype.activate=function(){return e.__super__.activate.apply(this,arguments),$.get("/PaymentSettings/LicenseesList").done(function(n){return function(t){var u,i,f,r;for(r=[],i=0,f=t.length;i<f;i++)u=t[i],r.push(n.licensees.push(u));return r}}(this)),$.get("/PaymentSettings/BrandsList").done(function(n){return function(t){var u,i,f,r;for(r=[],i=0,f=t.length;i<f;i++)u=t[i],r.push(n.brands.push(u));return r}}(this)),$.get("/PaymentSettings/StatusesList").done(function(n){return function(t){var u,i,f,r;for(r=[],i=0,f=t.length;i<f;i++)u=t[i],r.push(n.statuses.push(u));return r}}(this)),$.get("/PaymentGatewaySettings/GetPaymentGateways").done(function(n){return function(t){var f,i,e,r,u;for(r=t.data.paymentGateways,u=[],i=0,e=r.length;i<e;i++)f=r[i],u.push(n.paymentGateways.push(f.name));return u}}(this))},e.prototype.openAddTab=function(){return u.open({path:"payments/payment-gateway-settings/details",title:r.t("app:payment.newPaymentGatewaySettings"),data:{pageMode:"Add"}})},e.prototype.openEditTab=function(){if(this.rowId()!=null)return u.open({path:"payments/payment-gateway-settings/details",title:r.t("app:payment.editPaymentGatewaySettings"),data:{id:this.rowId(),editMode:!0,pageMode:"Edit"}})},e.prototype.openViewTab=function(){if(this.rowId()!=null)return u.open({path:"payments/payment-gateway-settings/details",title:r.t("app:payment.viewPaymentGatewaySettings"),data:{id:this.rowId(),editMode:!1,pageMode:"View"}})},e.prototype.openActivateDialog=function(){return f.show(this.canDeactivate(),this.rowId())},e.prototype.openDeactivateDialog=function(){return f.show(this.canDeactivate(),this.rowId())},e}(n("vmGrid"))})}).call(this);