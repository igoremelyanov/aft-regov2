(function(){define(function(n){var r,t,i,u;return i=n("nav"),t=n("i18next"),r=n("durandal/app"),u=0,function(){function n(){var n;n=u++;this.id=ko.observable();this.baseInfo=ko.observable();this.gridId="";this.isSubmitted=ko.observable(!1);this.bankInformation=ko.observable();this.remark=ko.observable().extend({required:!0,maxLength:256});this.errors=ko.validation.group(this);this.message=ko.observable();this.messageClass=ko.observable()}return n.prototype.activate=function(n){return this.id(n.id),this.gridId=n.gridId,this.load(n.id)},n.prototype.load=function(n){return $.get("/OfflineWithdraw/CancelInfo",{id:n}).done(function(n){return function(t){n.baseInfo.Licensee=t.baseInfo.licensee;n.baseInfo.Brand=t.baseInfo.brand;n.baseInfo.Username=t.baseInfo.username;n.baseInfo.ReferenceCode=t.baseInfo.referenceCode;n.baseInfo.Status=t.baseInfo.status;n.baseInfo.InternalAccount=t.baseInfo.internalAccount;n.baseInfo.PaymentMethod=t.baseInfo.paymentMethod;n.baseInfo.Currency=t.baseInfo.currency;n.baseInfo.Amount=t.baseInfo.amount;n.baseInfo.Submitted=t.baseInfo.submitted;n.baseInfo.DateSubmitted=t.baseInfo.dateSubmitted;n.bankInformation.BankName=t.bankInformation.bankName;n.bankInformation.BankAccountName=t.bankInformation.bankAccountName;n.bankInformation.BankAccountNumber=t.bankInformation.bankAccountNumber;n.bankInformation.Branch=t.bankInformation.branch;n.bankInformation.Swift=t.bankInformation.swiftCode;n.bankInformation.Address=t.bankInformation.address;n.bankInformation.City=t.bankInformation.city;n.bankInformation.Province=t.bankInformation.province}}(this))},n.prototype.submit=function(){var n;if(n=this,this.isValid())r.showMessage("Are you sure you want to cancel offline withdrawal request?","Cancel offline withdrawal request",[{text:t.t("common.booleanToYesNo.true"),value:!0},{text:t.t("common.booleanToYesNo.false"),value:!1}],!1,{style:{width:"420px"}}).then(function(t){return function(r){if(r)return $.post("/OfflineWithdraw/CancelRequest",{id:t.id(),remark:t.remark()}).done(function(t){if(t.result==="success")return n.isSubmitted(!0),i.title("Withdrawal Cancel View"),n.messageClass("alert-success"),n.message("Offline Withdawal request has been successfully canceled"),$(n.gridId).trigger("reloadGrid")})}}(this));else return this.errors.showAllMessages(!0)},n.prototype.close=function(){return i.close()},n}()})}).call(this);