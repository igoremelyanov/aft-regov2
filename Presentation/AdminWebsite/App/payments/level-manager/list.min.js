(function(){define(function(n){var u,f,e,i,r,t,o;return n("controls/grid"),r=n("nav"),i=n("i18next"),o=n("shell"),t=n("security/security"),f=n("payments/level-manager/activate-dialog"),e=n("payments/level-manager/deactivate-dialog"),u=n("CommonNaming"),function(){function n(){this.isAddAllowed=ko.observable(t.isOperationAllowed(t.permissions.create,t.categories.paymentLevelManager));this.isEditAllowed=ko.observable(t.isOperationAllowed(t.permissions.update,t.categories.paymentLevelManager));this.isActivateAllowed=ko.observable(t.isOperationAllowed(t.permissions.activate,t.categories.paymentLevelManager));this.isDeactivateAllowed=ko.observable(t.isOperationAllowed(t.permissions.deactivate,t.categories.paymentLevelManager));this.naming=new u("payment-levels");this.rowId=ko.observable();this.rowName=ko.observable();this.canActivate=ko.observable(!1);this.canDeactivate=ko.observable(!1);this.levelSearchPattern=ko.observable();this.filterVisible=ko.observable(!1);o.selectedBrandsIds.subscribe(function(n){return function(){return $("#"+n.naming.gridBodyId).trigger("reload")}}(this));this.compositionComplete=function(n){return function(){return $(function(){$("#"+n.naming.gridBodyId).on("gridLoad selectionChange",function(t,i){if(i.id!==null)return n.rowId(i.id),n.rowName(i.data.Name),n.canActivate(i.data.Status!=="Active"),n.canDeactivate(i.data.Status!=="Inactive")});return $("#"+n.naming.searchFormId).submit(function(){return n.levelSearchPattern($("#"+n.naming.searchNameFieldId).val()),$("#"+n.naming.gridBodyId).trigger("reload"),!1})})}}(this)}return n.prototype.openAddTab=function(){return r.open({path:"payments/level-manager/edit",title:i.t("app:payment.newLevel")})},n.prototype.openEditTab=function(){if(this.rowId()!=null)return r.open({path:"payments/level-manager/edit",title:i.t("app:payment.editLevel"),data:{id:this.rowId(),editMode:!0}})},n.prototype.openViewTab=function(){if(this.rowId()!=null)return r.open({path:"payments/level-manager/edit",title:i.t("app:payment.viewLevel"),data:{id:this.rowId(),editMode:!1}})},n.prototype.getStatus=function(n){return i.t("app:payment.paymentlevel.status."+n)},n.prototype.openActivateDialog=function(){return f.show(this,this.rowId())},n.prototype.openDeactivateDialog=function(){return e.show(this,this.rowId(),this.rowName())},n}()})}).call(this);