(function(){define(function(n){return this.DocumentContainerItem=function(){function t(n){this.signature=n;this.documentModel=ko.observable();this.subContainer=ko.observable();this.signature.title=ko.observable(ko.unwrap(this.signature.title));this.signature.id=ko.observable(this.signature.title().replace(/\s+/g,"-").toLowerCase());this.signature.lazy=ko.observable(ko.unwrap(this.signature.lazy||!1))}return t.prototype.instantiate=function(){var r,t,u,i;if(this.instantiated=!0,this.signature.path!=null)n([this.signature.path],function(n){return function(t){return n.documentModel(typeof t=="function"?new t:t)}}(this));else if(this.signature.container!=null)for(this.subContainer(new DocumentContainer),i=this.signature.container,t=0,u=i.length;t<u;t++)r=i[t],this.subContainer().openItem(r);return this},t}(),this.DocumentContainer=function(){function n(){this.items=ko.observableArray();this.activeItem=ko.observable();this.activeItem.subscribe(function(n){return function(){var t;return n.activeItem()==null||!n.activeItem().signature.lazy()||((t=n.activeItem())!=null?t.instantiated:void 0)||n.activeItem().instantiate(),setTimeout(function(){return $(window).resize()}),setTimeout(function(){return $(window).resize()},500)}}(this))}return n.prototype.openItem=function(n,t){var i;return t==null&&(t=this.defaultSameItemComparator),i=this.getDuplicateItem(t,n),this.selectItem(i||this.addItem(n))},n.prototype.getDuplicateItem=function(n,t){return ko.utils.arrayFirst(this.items(),function(i){return n(i.signature,t)})},n.prototype.defaultSameItemComparator=function(n,t){return ko.unwrap(n.title)===ko.unwrap(t.title)&&n.path===t.path&&ko.toJSON(n.data)===ko.toJSON(t.data)},n.prototype.addItem=function(n){var t;return this.items.push(t=new DocumentContainerItem(n)),t.signature.lazy()?void 0:t.instantiate()},n.prototype.selectItem=function(n){if(n!==this.activeItem())return this.activeItem(n)},n.prototype.closeItem=function(n){return n===this.activeItem()&&this.selectItem(this.items()[Math.max(0,this.items.indexOf(n)-1)]),this.items.remove(n)},n.prototype.closeActiveItem=function(){return this.closeItem(this.activeItem())},n}()});$(function(){return setInterval(function(){return $(".document-loader:not(.hiding)").each(function(){var n;if((n=$(this).next()).html())return $(this).addClass("hiding"),setTimeout(function(t){return function(){return $(t).hide(),n.css({visibility:"visible"}),$(window).resize()}}(this),100)})},100)})}).call(this);