(function(){define(function(n){var i,t,r;return t=n("layout/shell/main-menu"),r=n("security/security"),i=function(){function n(){this.menu=ko.observableArray();this.activeSubItem=ko.observable();this.activeItem=ko.computed(function(n){return function(){var t;return t=n.activeSubItem(),ko.utils.arrayFirst(n.menu(),function(n){return ko.utils.arrayFirst(n.submenu,function(n){return n===t})},n)}}(this))}return n.prototype.updateMenu=function(){var i,u,e,f,n,o;return t=function(){var s=[];for(e in t)u=t[e],s.push({menuItem:u,submenu:function(){var t,e;t=u.submenu;e=[];for(o in t)n=t[o],(n.path!=null||n.container!=null)&&(n.security==null||console.log(n)||function(){var t,o,u,e;for(u=n.security,e=[],t=0,o=u.length;t<o;t++)i=u[t],e.push(function(){var n,u,t;for(t=[],n=0,u=i.length;n<u;n++)f=i[n],t.push(r.isOperationAllowed(f.split("/")[1],f.split("/")[0]));return t}().every(function(n){return n}));return e}().some(function(n){return n}))&&e.push({menuItem:n});return e}()});return s}(),this.menu(t)},n.prototype.compositionComplete=function(){var n;try{ace.settings.check("sidebar","collapsed")}catch(t){n=t}try{return ace.settings.check("sidebar","fixed")}catch(t){n=t}},n}(),new i})}).call(this);