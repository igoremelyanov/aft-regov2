(function(){define(function(n){var t,i;return t=n("layout/document-container/document-container"),i=function(){function i(){this.sidebar=n("layout/shell/sidebar");this.mainContainer=new t}return i.prototype.activate=function(){return this.sidebar.updateMenu()},i.prototype.compositionComplete=function(){return this.mutex=!1,this.sidebar.activeSubItem.subscribe(function(n){return function(t){var i;if(!i){i=!0;try{if(t.menuItem.path!=null||t.menuItem.container!=null)return n.mainContainer.openItem(t.menuItem)}finally{i=!1}}}}(this)),this.mainContainer.activeItem.subscribe(function(n){return function(t){var i;if(!i&&t!=null){i=!0;try{return ko.utils.arrayForEach(n.sidebar.menu(),function(i){var r;return r=ko.utils.arrayFirst(i.submenu,function(n){return n.menuItem.title===t.signature.title}),r!=null?n.sidebar.activeSubItem(r):void 0})}finally{i=!1}}}}(this))},i.prototype.open=function(n){var r,t,i,u;return t=(u=this.mainContainer.activeItem())!=null?u.subContainer():void 0,ko.unwrap(n.title).indexOf("View")!==-1?(r=function(n,t){var i,r;return ko.unwrap(n.title)===ko.unwrap(t.title)&&n.path===t.path&&ko.toJSON((i=n.data)!=null?i.id:void 0)===ko.toJSON((r=t.data)!=null?r.id:void 0)},i=t!=null?t.getDuplicateItem(r,n):void 0,i&&t!=null&&t.closeItem(i),t!=null?t.selectItem(t!=null?t.addItem(n):void 0):void 0):t!=null?t.openItem(n,function(n,t){return ko.unwrap(n.title)===ko.unwrap(t.title)&&n.path===t.path&&ko.toJSON(n.data)===ko.toJSON(t.data)}):void 0},i.prototype.closeViewTab=function(n,t){var f,i,e,u,o,s,r;for(f=(s=this.mainContainer.activeItem())!=null?s.subContainer():void 0,e=f.items(),r=[],u=0,o=e.length;u<o;u++)i=e[u],i?i.signature.title().indexOf("View")!==-1&&i.documentModel().hasOwnProperty(n)&&i.documentModel()[n]()===t?r.push(f.closeItem(i)):r.push(void 0):r.push(void 0);return r},i.prototype.close=function(){var n,t;if((n=this.mainContainer.activeItem())!=null)return(t=n.subContainer())!=null?t.closeActiveItem():void 0},i.prototype.makeUnique=function(){var n,t,i,r;return n=(t=this.mainContainer.activeItem())!=null?(i=t.subContainer())!=null?(r=i.activeItem())!=null?r.signature:void 0:void 0:void 0,n.data==null&&(n.data={}),n.data["unique_"+Math.random()]=Math.random()},i.prototype.setData=function(n){var t,i,r,u;return t=(i=this.mainContainer.activeItem())!=null?(r=i.subContainer())!=null?(u=r.activeItem())!=null?u.signature:void 0:void 0:void 0,t.data=n||{}},i.prototype.title=function(n){var t,i,r,u,f,e,o,s;return n!=null&&(t=this.mainContainer.activeItem())!=null&&(i=t.subContainer())!=null&&(r=i.activeItem())!=null&&(u=r.signature)!=null&&u.title(n),(f=this.mainContainer.activeItem())!=null?(e=f.subContainer())!=null?(o=e.activeItem())!=null?(s=o.signature)!=null?s.title():void 0:void 0:void 0:void 0},i}(),new i})}).call(this);