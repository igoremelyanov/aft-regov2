(function(){var n={}.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};define(function(n){var u,f,r,e,i,o;return n("controls/grid"),e=n("nav"),r=n("i18next"),u=n("durandal/app"),i=n("security/security"),o=n("brand/translation-manager/dialogs/status-dialog"),f=n("config"),function(n){function s(){s.__super__.constructor.apply(this,arguments);this.isAddAllowed=ko.computed(function(){return i.isOperationAllowed(i.permissions.create,i.categories.translationManager)});this.isEditAllowed=ko.computed(function(){return i.isOperationAllowed(i.permissions.update,i.categories.translationManager)});this.isViewAllowed=ko.computed(function(){return i.isOperationAllowed(i.permissions.view,i.categories.translationManager)});this.isActivateAllowed=ko.computed(function(){return i.isOperationAllowed(i.permissions.activate,i.categories.translationManager)});this.isDeactivateAllowed=ko.computed(function(){return i.isOperationAllowed(i.permissions.deactivate,i.categories.translationManager)});this.isDeleteAllowed=ko.computed(function(){return i.isOperationAllowed(i.permissions["delete"],i.categories.translationManager)});this.canActivate=ko.observable(!1);this.canDeactivate=ko.observable(!1);this.languageNames=ko.observableArray();this.noRecordsFound=ko.observable(!1)}return t(s,n),s.prototype.rowChange=function(n){return this.canActivate(n.data.Status==="Disabled"),this.canDeactivate(n.data.Status==="Enabled"),this.noRecordsFound($("#translation-grid")[0].gridParam("reccount")===0)},s.prototype.activate=function(){return s.__super__.activate.apply(this,arguments),$.get(f.adminApi("ContentTranslation/GetContentTranslationAddData")).success(function(n){return function(t){return n.languageNames(t.languages.map(function(n){return n.code}))}}(this))},s.prototype.openAddTranslationTab=function(){return e.open({path:"brand/translation-manager/add-translation",title:r.t("app:contenttranslation.newTranslation")})},s.prototype.openEditTranslationTab=function(){return e.open({path:"brand/translation-manager/edit-translation",title:r.t("app:contenttranslation.editTranslation"),data:{id:this.rowId()}})},s.prototype.openViewTranslationTab=function(){},s.prototype.activateTranslation=function(){var n;return n=new o(this.rowId(),""),n.show(!0)},s.prototype.deactivateTranslation=function(){var n;return n=new o(this.rowId(),""),n.show(!1)},s.prototype.deleteTranslation=function(){var n;return n=this.rowId(),u.showMessage(r.t("app:contenttranslation.messages.deleteQuestion"),r.t("app:contenttranslation.messages.confirmDelete"),[{text:r.t("common.booleanToYesNo.true"),value:!0},{text:r.t("common.booleanToYesNo.false"),value:!1}],!1,{style:{width:"350px"}}).then(function(){return function(t){if(t)return $.ajax({type:"POST",url:f.adminApi("ContentTranslation/DeleteContentTranslation"),data:ko.toJSON({id:n}),dataType:"json",contentType:"application/json"}).done(function(){})}}(this)).done(function(){return function(n){return n.result==="success"?($("#translation-grid").trigger("reload"),u.showMessage(r.t("contenttranslation.messages.translationDeleted"),r.t("contenttranslation.messages.translationDeletedTitle"),[r.t("common.close")])):u.showMessage(n.Message,r.t("common.error"),[r.t("common.close")])}}(this))},s}(n("vmGrid"))})}).call(this);