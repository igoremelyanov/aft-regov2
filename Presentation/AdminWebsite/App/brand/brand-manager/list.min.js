(function(){var n={}.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};define(function(n){var s,e,r,u,i,o,f;return s=n("durandal/app"),i=n("security/security"),r=n("i18next"),u=n("nav"),o=n("shell"),f=n("brand/brand-manager/status-dialog"),e=n("config"),function(n){function s(){s.__super__.constructor.apply(this,arguments);this.config=e;this.shell=o;this.gridId="#brand-grid";this.rowId=ko.observable();this.canActivate=ko.observable();this.canDeactivate=ko.observable();this.canEdit=ko.observable(!1);this.hasAddPermission=ko.observable(i.isOperationAllowed(i.permissions.create,i.categories.brandManager));this.hasEditPermission=ko.observable(i.isOperationAllowed(i.permissions.update,i.categories.brandManager));this.hasViewPermission=ko.observable(i.isOperationAllowed(i.permissions.view,i.categories.brandManager));this.hasActivatePermission=ko.observable(i.isOperationAllowed(i.permissions.activate,i.categories.brandManager));this.hasDeactivatePermission=ko.observable(i.isOperationAllowed(i.permissions.deactivate,i.categories.brandManager));this.compositionComplete=function(n){return function(){return $(function(){return $(n.gridId).on("gridLoad selectionChange",function(t,i){return n.rowId(i.id),n.canActivate(i.data.Status==="Inactive"),n.canDeactivate(i.data.Status==="Active"),n.canEdit(n.canActivate())})})}}(this);this.onBrandChanged=function(n){return function(){return $(n.gridId).trigger("reload")}}(this);$(document).on("brand_changed",this.onBrandChanged);this.detached=function(n){return function(){return $(document).off("brand_changed",n.onBrandChanged)}}(this)}return t(s,n),s.prototype.openAddTab=function(){return u.open({path:"brand/brand-manager/add-brand",title:r.t("app:brand.newBrand")})},s.prototype.openEditTab=function(){var n;return n=this.rowId(),u.open({path:"brand/brand-manager/edit-brand",title:r.t("app:brand.edit"),data:n!=null?{id:n}:void 0})},s.prototype.openViewTab=function(){var n;return n=this.rowId(),u.open({path:"brand/brand-manager/view-brand",title:r.t("app:brand.view"),data:n!=null?{id:n}:void 0})},s.prototype.showActivateDialog=function(){return f.show(this.rowId())},s.prototype.showDeactivateDialog=function(){return f.show(this.rowId(),!0)},s}(n("vmGrid"))})}).call(this);