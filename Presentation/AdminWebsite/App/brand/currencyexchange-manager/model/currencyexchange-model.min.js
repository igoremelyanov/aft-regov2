(function(){var n={}.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};define(function(n){var r,i,u,f;return f=n("komapping"),u=n("i18next"),r=n("controls/assign"),i=n("base/base-model"),function(n){function i(){i.__super__.constructor.call(this,"CurrencyExchangeModel");this.isEdit=ko.observable(!1);this.licensees=ko.observableArray();this.licenseeId=this.makeField();this.licensee=ko.observable();this.licenseeName=this.makeField();this.brands=ko.observableArray();this.brandId=this.makeField();this.brand=ko.observable();this.brandName=this.makeField();this.currencies=ko.observableArray();this.currencyCode=this.makeField();this.currency=ko.observable();this.baseCurrency=this.makeField();this.currentRate=this.makeField().extend({required:!0,number:!0,min:.01,max:Math.pow(10,10)});this.previousRate=this.makeField();this.licenseeId.subscribe(function(n){return function(t){var i;return n.licensee(function(){var n,f,r,u;for(r=this.licensees(),u=[],n=0,f=r.length;n<f;n++)i=r[n],i.id===t&&u.push(i.name);return u}.call(n)[0]),t!=null?$.get("/CurrencyExchange/GetLicenseeBrands",{licenseeId:t,useBrandFilter:!n.isEdit()}).done(function(t){return n.brands(t.brands),n.brandId()==null?n.brandId.setValueAndDefault(t.brands[0].id):void 0}):void 0}}(this));this.brandId.subscribe(function(n){return function(t){var i;return n.brand(function(){var n,f,r,u;for(r=this.brands(),u=[],n=0,f=r.length;n<f;n++)i=r[n],i.id===t&&u.push(i.name);return u}.call(n)[0]),n.baseCurrency(function(){var n,f,r,u;for(r=this.brands(),u=[],n=0,f=r.length;n<f;n++)i=r[n],i.id===t&&u.push(i.baseCurrencyCode);return u}.call(n)[0]),t!=null?$.get("/CurrencyExchange/GetBrandCurenciesCode",{brandId:t}).done(function(t){var i,r,f,u;for(n.currencies.removeAll(),u=t.curencies,r=0,f=u.length;r<f;r++)i=u[r],i.currencyCode!==n.baseCurrency()&&(console.log("code "+i.currencyCode+" base "+n.baseCurrency()),n.currencies.push(i));if(n.currencyCode()==null)return n.currencyCode.setValueAndDefault(t.curencies[0].currencyCode)}):void 0}}(this));this.isHavePreviousRate=ko.computed(function(n){return function(){return n.previousRate()!=null}}(this))}return t(i,n),i}(i)})}).call(this);