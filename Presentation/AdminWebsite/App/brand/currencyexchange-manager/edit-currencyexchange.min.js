(function(){var n={}.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};define(function(n){var u,f,e,o,i,h,s,r,c,l;return s=n("nav"),i=n("i18next"),l=n("toastr"),f=n("durandal/app"),h=n("brand/currencyexchange-manager/list"),e=n("base/base-view-model"),o=n("brand/currencyexchange-manager/model/currencyexchange-model"),r=function(){return $("#currencyexchange-list").trigger("reload")},c=function(n){return f.showMessage(n,i.t("app:currencies.validationError",[i.t("common.close")],!1,{style:{width:"350px"}}))},u=function(n){function u(){u.__super__.constructor.apply(this,arguments);this.SavePath="/CurrencyExchange/UpdateExchangeRate";this.RevertPath="/CurrencyExchange/RevertExchangeRate";jQuery.ajaxSettings.traditional=!0}return t(u,n),u.prototype.activate=function(n){return u.__super__.activate.apply(this,arguments),console.log("data "+n.id),this.Model=new o,this.readOnly(!1),$.get("CurrencyExchange/GetEditData",{id:n.id}).done(function(n){return function(t){return console.log(t),n.Model.mapfrom(t),n.Model.licenseeId(t.licenseeId),n.Model.licenseeName(t.licenseeName),n.Model.brandId(t.brandId),n.Model.brandName(t.brandName),n.Model.baseCurrency(t.baseCurrency),n.Model.currency(t.currency),n.Model.currentRate(t.currentRate),n.Model.previousRate(t.previousRate)}}(this))},u.prototype.onsave=function(){return r(),this.success(i.t("app:currencies.exchangeRateSuccessfullyUpdated")),s.title(i.t("app:currencies.viewRate")),this.readOnly(!0)},u.prototype.onfail=function(n){return console.log("data "+n)},u.prototype.revert=function(){return $.post(this.RevertPath,this.Model.mapto(),function(n){return function(t){if(t.result==="success")return n.oldrate=n.Model.currentRate(),n.newrate=n.Model.previousRate(),n.Model.currentRate(n.newrate),n.Model.previousRate(n.oldrate),n.submit(),n.readOnly(!0),r();n.onfail(t);return n.handleSaveFailure(t),n.Model.serverErrors.push(t.data)}}(this))},u}(e),new u})}).call(this);