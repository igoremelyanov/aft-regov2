(function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};define(["nav","durandal/app","i18next","security/security","shell","controls/grid","config"],function(t,i,r,u,f,e,o){return function(){function e(){this.deleteGameProvider=n(this.deleteGameProvider,this);this.shell=f;this.gameProviderId=ko.observable();this.canBeEditedDeleted=ko.observable(!1);this.gameManagementEnabled=ko.observable(o.gameManagementEnabled);this.compositionComplete=function(n){return function(){return $("#game-providers-grid").on("gridLoad selectionChange",function(t,i){return n.gameProviderId(i.id),n.canBeEditedDeleted(!0)})}}(this);this.isAddBtnVisible=ko.computed(function(){return u.isOperationAllowed(u.permissions.create,u.categories.productManager)});this.isEditBtnVisible=ko.computed(function(){return u.isOperationAllowed(u.permissions.update,u.categories.productManager)})}return e.prototype.openAddGameProvider=function(){return t.open({path:"product/products-manager/edit-gameProvider",title:r.t("app:gameIntegration.gameProviders.new")})},e.prototype.openEditGameProvider=function(){if(this.gameProviderId())return t.open({path:"product/products-manager/edit-gameProvider",title:r.t("app:gameIntegration.gameProviders.edit"),data:{id:this.gameProviderId()}})},e.prototype.deleteGameProvider=function(){if(this.templateId())return i.showMessage(r.t("messageTemplates.dialogs.confirmDeleteTemplate"),r.t("messageTemplates.dialogs.deleteTitle"),[{text:r.t("common.booleanToYesNo.true"),value:!0},{text:r.t("common.booleanToYesNo.false"),value:!1}],!1,{style:{width:"350px"}}).then(function(n){return function(t){if(t)return $.post("/messagetemplate/deletetemplate",{id:n.templateId()}).done(function(t){return t.Success?($("#game-providers-grid").trigger("reload"),n.canBeEditedDeleted(!1),i.showMessage(r.t("messageTemplates.dialogs.deleteSuccessful"),r.t("messageTemplates.dialogs.successful"),[r.t("common.close")])):i.showMessage(t.Message,r.t("common.error"),[r.t("common.close")])})}}(this))},e}()})}).call(this);