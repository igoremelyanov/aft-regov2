(function(){var n={}.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};define(function(n){var u,e,i,f,r;return u=n("durandal/app"),r=n("security/security"),i=n("i18next"),f=n("nav"),e=n("config"),function(n){function o(){o.__super__.constructor.apply(this,arguments);this.isAddAllowed=ko.observable(r.isOperationAllowed(r.permissions.create,r.categories.countryManager));this.isEditAllowed=ko.observable(r.isOperationAllowed(r.permissions.update,r.categories.countryManager));this.isDeleteAllowed=ko.observable(r.isOperationAllowed(r.permissions["delete"],r.categories.countryManager));this.onCountryChanged=function(n){return function(){return n.reloadGrid()}}(this);$(document).on("country_changed",this.onCountryChanged);this.detached=function(n){return function(){return $(document).off("country_changed",n.onCountryChanged)}}(this)}return t(o,n),o.prototype.openAddTab=function(){return f.open({path:"country-manager/edit",title:i.t("app:country.new")})},o.prototype.openEditTab=function(){return f.open({path:"country-manager/edit",title:i.t("app:country.edit"),data:{oldCode:this.rowId()}})},o.prototype.deleteItem=function(){return u.showMessage(i.t("country.messages.delete"),i.t("country.messages.confirmDeletion"),[{text:i.t("common.booleanToYesNo.true"),value:!0},{text:i.t("common.booleanToYesNo.false"),value:!1}],!1,{style:{width:"350px"}}).then(function(n){return function(t){if(t)return $.ajax({type:"POST",url:e.adminApi("Country/Delete"),data:ko.toJSON({code:n.rowId()}),dataType:"json",traditional:!0,contentType:"application/json"}).done(function(t){return t.result==="success"?(n.reloadGrid(),u.showMessage(i.t(t.data),i.t("country.delete"),[i.t("common.close")])):u.showMessage(i.t(t.data),i.t("common.error"),[i.t("common.close")])})}}(this))},o}(n("vmGrid"))})}).call(this);