(function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};define(function(){var r,i,t;return i=require("plugins/dialog"),t=require("i18next"),r=require("config"),function(){function u(t,i){this.ok=n(this.ok,this);this.title=ko.observable();this.remarks=ko.observable(i).extend({required:!0});this.userId=ko.observable(t);this.isActive=ko.observable(!0);this.errors=ko.validation.group(this);this.submitted=ko.observable(!1);this.message=ko.observable();this.error=ko.observable()}return u.prototype.ok=function(){return this.isValid()?$.ajax({type:"POST",url:r.adminApi(this.isActive()?"AdminManager/Activate":"AdminManager/Deactivate"),data:ko.toJSON({id:this.userId(),remarks:this.remarks()}),contentType:"application/json"}).done(function(n){return function(i){return i.result==="failed"?n.error(i.data):(n.message(t.t(n.isActive()?"app:admin.messages.userActivated":"app:admin.messages.userDeactivated")),n.submitted(!0),$("#user-grid").trigger("reload"))}}(this)):this.errors.showAllMessages()},u.prototype.cancel=function(){return i.close(this)},u.prototype.clear=function(){return this.remarks("")},u.prototype.show=function(n){return this.isActive(n),this.title(n?t.t("app:admin.messages.activateUser"):t.t("app:admin.messages.deactivateUser")),i.show(this)},u}()})}).call(this);