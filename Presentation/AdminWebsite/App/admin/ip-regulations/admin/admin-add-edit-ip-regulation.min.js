(function(){var n={}.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};define(function(){var r,u,i,n,f,e;return n=require("i18next"),r=require("durandal/app"),e=require("admin/ip-regulations/admin/list"),u=require("base/base-view-model"),f=require("admin/ip-regulations/admin/model/admin-ip-regulation-model"),i=require("config"),function(u){function o(){o.__super__.constructor.apply(this,arguments);this.displayedMessage=ko.observable();this.advancedSettings=ko.observable(!1);this.ipFile=ko.observable()}return t(o,u),o.prototype.uploadAddresses=function(){var t;return t=function(n){return function(){var t,i;return t=$("input[type=file]")[0].files[0],t!=null?(i=new FileReader,i.readAsText(t,"UTF-8"),i.onload=function(t){return n.Model.ipAddressBatch((n.Model.ipAddressBatch()==null?"":n.Model.ipAddressBatch())+t.target.result)}):void 0}}(this),this.Model.ipAddressBatch()!=null&&this.Model.ipAddressBatch().replace(" ","").replace("\n","").replace("\t","")!==""?r.showMessage(n.t("app:admin.messages.multipleIpAddressesIsntEmpty"),n.t("app:admin.messages.multipleIpAddressesOverwrite"),[{text:"Overwrite",value:"overwrite"},{text:"Append",value:"append"},{text:"Cancel",value:"cancel"}],!1,{style:{width:"350px"}}).then(function(n){return function(i){switch(i){case"overwrite":return n.Model.ipAddressBatch(null),t();case"append":return n.Model.ipAddressBatch(n.Model.ipAddressBatch()+";\n"),t()}}}(this)):t()},o.prototype.onsave=function(){return e.reloadGrid(),this.success(this.displayedMessage()),this.readOnly(!0),this.renameTab(n.t("app:admin.ipRegulationManager.viewAdminTabTitle"))},o.prototype.activate=function(t){var r,u;return o.__super__.activate.apply(this,arguments),r=$.Deferred(),this.Model=new f,u={},this.Model.isEdit(t!=null),this.Model.isEdit()?(u={id:t.id},this.SavePath=i.adminApi("AdminIpRegulations/UpdateIpRegulation"),this.contentType("application/json"),this.displayedMessage(n.t("app:admin.messages.regultionSuccesfullyUpdated"))):(this.SavePath=i.adminApi("AdminIpRegulations/CreateIpRegulation"),this.contentType("application/json"),this.displayedMessage(n.t("app:admin.messages.regultionSuccesfullyCreated"))),$.get(i.adminApi("AdminIpRegulations/GetEditData"),u).done(function(n){return function(t){return n.Model.isEdit()&&n.Model.editIpAddress(t.model.ipAddress),n.Model.mapfrom(t.model),r.resolve()}}(this)),r.promise()},o}(u)})}).call(this);