(function(){var n={}.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};define(function(n){var e,u,o,i,s,f,r,h,c;return n("controls/grid"),f=n("nav"),i=n("i18next"),s=n("JqGridUtil"),c=n("toastr"),u=n("durandal/app"),r=n("security/security"),h=n("shell"),o=n("config"),e=function(n){function e(){e.__super__.constructor.apply(this,arguments);this.isAddAllowed=ko.observable(r.isOperationAllowed(r.permissions.create,r.categories.backendIpRegulationManager));this.isEditAllowed=ko.observable(r.isOperationAllowed(r.permissions.update,r.categories.backendIpRegulationManager));this.isDeleteAllowed=ko.observable(r.isOperationAllowed(r.permissions["delete"],r.categories.backendIpRegulationManager))}return t(e,n),e.prototype.reloadGrid=function(){return $("#admin-regulation-grid").trigger("reload")},e.prototype.openAddIpRegulationTab=function(){return f.open({path:"admin/ip-regulations/admin/admin-add-edit-ip-regulation",title:i.t("app:admin.ipRegulationManager.newAdminTabTitle")})},e.prototype.openEditIpRegulationTab=function(){return f.open({path:"admin/ip-regulations/admin/admin-add-edit-ip-regulation",title:i.t("app:admin.ipRegulationManager.editAdminTabTitle"),data:this.rowId()!=null?{id:this.rowId()}:void 0})},e.prototype.deleteIpRegulation=function(){var n;if(n=this.rowId(),n!=null)return u.showMessage(i.t("app:admin.messages.deleteIpRegulation"),i.t("app:admin.messages.confirmIpRegulationDeletion"),[{text:i.t("common.booleanToYesNo.true"),value:!0},{text:i.t("common.booleanToYesNo.false"),value:!1}],!1,{style:{width:"350px"}}).then(function(t){return function(r){if(r)return $.ajax({type:"POST",url:o.adminApi("AdminIpRegulations/DeleteIpRegulation"),data:ko.toJSON({id:n}),dataType:"json",contentType:"application/json"}).done(function(n){return n.result==="success"?(t.reloadGrid(),u.showMessage(i.t("admin.messages.ipRegulationDeletedSuccessully"),i.t("bonus.templateManager.delete"),[i.t("common.close")])):u.showMessage(n.Message,i.t("common.error"),[i.t("common.close")])})}}(this))},e}(n("vmGrid")),new e})}).call(this);