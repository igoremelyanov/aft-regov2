(function(){var n={}.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};define(function(n){var o,u,s,i,h,f,r,e,c;return n("controls/grid"),f=n("nav"),i=n("i18next"),h=n("JqGridUtil"),c=n("toastr"),u=n("durandal/app"),r=n("security/security"),e=n("shell"),s=n("config"),o=function(n){function o(){o.__super__.constructor.apply(this,arguments);this.isAddAllowed=ko.observable(r.isOperationAllowed(r.permissions.create,r.categories.brandIpRegulationManager));this.isEditAllowed=ko.observable(r.isOperationAllowed(r.permissions.update,r.categories.brandIpRegulationManager));this.isDeleteAllowed=ko.observable(r.isOperationAllowed(r.permissions["delete"],r.categories.brandIpRegulationManager));this.brandFilter=ko.computed(function(){return function(){return e.brand().id()!=null?e.brand().id():null}}(this))}return t(o,n),o.prototype.reloadGrid=function(){return $("#regulation-grid").trigger("reload")},o.prototype.openAddIpRegulationTab=function(){return f.open({path:"admin/ip-regulations/brand/brand-add-edit-ip-regulation",title:i.t("app:admin.ipRegulationManager.newBrandTabTitle")})},o.prototype.openEditIpRegulationTab=function(){var n;return n=this.rowId(),f.open({path:"admin/ip-regulations/brand/brand-add-edit-ip-regulation",title:i.t("app:admin.ipRegulationManager.editBrandTabTitle"),data:n!=null?{id:n}:void 0})},o.prototype.deleteIpRegulation=function(){var n;if(n=this.rowId(),n!=null)return u.showMessage(i.t("app:admin.messages.deleteIpRegulation"),i.t("app:admin.messages.confirmIpRegulationDeletion"),[{text:i.t("common.booleanToYesNo.true"),value:!0},{text:i.t("common.booleanToYesNo.false"),value:!1}],!1,{style:{width:"350px"}}).then(function(t){return function(r){if(r)return $.ajax({type:"POST",url:s.adminApi("BrandIpRegulations/DeleteIpRegulation"),data:ko.toJSON({id:n}),dataType:"json",contentType:"application/json"}).done(function(n){return n.result==="success"?(t.reloadGrid(),u.showMessage(i.t("admin.messages.ipRegulationDeletedSuccessully"),i.t("bonus.templateManager.delete"),[i.t("common.close")])):u.showMessage(n.Message,i.t("common.error"),[i.t("common.close")])})}}(this))},o}(n("vmGrid")),new o})}).call(this);