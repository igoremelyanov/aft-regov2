(function(){define(function(n){var r,i,u,f,t;return f=n("komapping"),u=n("i18next"),i=n("config"),r=function(){function n(){this.remarks=ko.observable("").extend({maxLength:200});this.licensees=ko.observableArray();this.brands=ko.observableArray();this.licensee=ko.observable().extend({required:!0});this.licensee.subscribe(function(n){return function(t){return n.loadBrands(t.id)}}(this));this.brand=ko.observable().extend({required:!0});this.brand.subscribe(function(n){return function(t){return n.loadPaymentMethods(t.id)}}(this));this.transactionType=ko.observable().extend({required:!0});this.transactionTypes=ko.observableArray();this.paymentMethod=ko.observable().extend({required:!0});this.paymentMethods=ko.observableArray();this.paymentMethodTitle=ko.computed(function(n){return function(){var t;return n.paymentMethod()&&n.paymentMethods()?(t=_.find(n.paymentMethods(),function(t){return t.id===n.paymentMethod()}),t?t.name:"-"):"-"}}(this));this.idFront=ko.observable();this.idBack=ko.observable();this.creditCardFront=ko.observable();this.creditCardBack=ko.observable();this.poa=ko.observable();this.dcf=ko.observable();this.setting=ko.observable()}return n.prototype.load=function(n){var t;return this.id=ko.observable(n),t=i.adminApi("IdentificationDocumentSettings/GetEditData"),this.id()&&(t=t+"?id="+this.id()),$.get(t).done(function(n){return function(t){if(n.licensees(t.licensees),n.transactionTypes(t.transactionTypes),t.licensees.length!==0)return n.id()&&t.setting?(n.setting(t.setting),n.idFront(t.setting.idFront),n.idBack(t.setting.idBack),n.creditCardFront(t.setting.creditCardFront),n.creditCardBack(t.setting.creditCardBack),n.poa(t.setting.poa),n.dcf(t.setting.dcf),n.remarks(t.setting.remark),n.paymentMethod(t.setting.paymentGatewayBankAccountId),n.transactionType(t.setting.transactionType),n.licensee(_.find(n.licensees(),function(n){return n.id===t.setting.licenseeId})),0):n.licensee(n.licensees()[0])}}(this))},n.prototype.loadBrands=function(n){if(n!=null)return $.get(i.adminApi("IdentificationDocumentSettings/GetLicenseeBrands?licenseeId="+n)).done(function(n){return function(t){if(n.brands(t.brands),t.brands.length!==0)return n.id()?n.brand(_.find(n.brands(),function(t){return t.id===n.setting().brandId})):n.brand(n.brands()[0])}}(this))},n.prototype.loadPaymentMethods=function(n){if(n!=null)return $.get(i.adminApi("IdentificationDocumentSettings/GetPaymentMethods?brandId="+n)).done(function(n){return function(t){if(n.paymentMethods(t.paymentMethods),t.paymentMethods.length!==0)return n.id()?n.paymentMethod(_.find(n.paymentMethods(),function(t){return t.id===n.paymentMethods().id})):n.paymentMethod(n.paymentMethods()[0])}}(this))},n.prototype.clear=function(){return this.remarks(""),this.remarks.isModified(!1),this.id(""),this.licensee(""),this.brand(""),this.transactionType(""),this.paymentMethod(""),this.idFront(""),this.idBack(""),this.creditCardFront(!1),this.creditCardBack(!1),this.poa(!1),this.dcf(!1)},n.prototype.getModelToSave=function(){var n;return n={LicenseeId:this.licensee().id,BrandId:this.brand().id,TransactionType:this.transactionType(),PaymentGatewayBankAccountId:this.paymentMethod(),IdFront:this.idFront(),IdBack:this.idBack(),CreditCardFront:this.creditCardFront(),CreditCardBack:this.creditCardBack(),POA:this.poa(),DCF:this.dcf(),Remark:this.remarks()},this.id()&&(n.Id=this.id()),n},n}(),t=new r,t.load(),t.errors=ko.validation.group(t),t})}).call(this);