(function(){var n=[].slice,t=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};define(function(i){var r,u;return r=i("komapping"),u=i("nav"),function(){function i(){this.serverErrors=ko.observableArray();this.errors=ko.validation.group(this);this.ignoredFields=[];this.ignoredClearFields=[]}return i.prototype.injectDefault=function(n){return n.setDefault=function(n){return this["default"]=n,this},n.setValueAndDefault=function(n){return this(n),this.setDefault(n),this},n},i.prototype.makeField=function(n){var t;return n==null&&(n=null),t=ko.observable(n),this.injectDefault(t).setDefault(n)},i.prototype.makeArrayField=function(n){var t;return n==null&&(n=[]),t=ko.observableArray(n),this.injectDefault(t).setDefault(n)},i.prototype.makeSelect=function(n,t){var i;return i=this.makeField(n),i.items=ko.observableArray(t),i.display=ko.observable(),i},i.prototype.mapto=function(n){var t;return t=["serverErrors","errors"],n!=null&&t.push.apply(t,n),JSON.parse(r.toJSON(this,{ignore:t}))},i.prototype.mapfrom=function(n){if(n!=null)return r.fromJS(n,{},this)},i.prototype.ignore=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],this.ignoredFields=t},i.prototype.ignoreClear=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],this.ignoredClearFields=t},i.prototype.clear=function(){var u,n,i,r=[];for(i in this)if(n=this[i],ko.isObservable(n)&&!(t.call(this.ignoredClearFields,i)>=0))if(typeof n.onclear=="function"&&n.onclear(),n["default"]!==void 0&&n.onclear==null)try{n(n["default"]);r.push(n.isModified(!1))}catch(f){u=f}else r.push(void 0);return r},i.prototype.validate=function(){var r,i,n;i=!0;for(r in this)n=this[r],t.call(this.ignoredFields,r)>=0||n!=null&&ko.isObservable(n)&&(typeof n.isModified=="function"&&n.isModified(!0),i=i&&(n.isValid?n.isValid():!0));return i},i}()})}).call(this);