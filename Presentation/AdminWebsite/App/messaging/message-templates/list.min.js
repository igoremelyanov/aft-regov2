(function(){var n={}.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};define(function(n){var f,o,s,r,u,i,e;return s=n("durandal/app"),i=n("security/security"),r=n("i18next"),u=n("nav"),e=n("shell"),f=n("messaging/message-templates/activate-dialog"),o=n("controls/status-dialog"),function(n){function o(){o.__super__.constructor.apply(this,arguments);this.shell=e;this.rowId=ko.observable();this.gridId="#message-template-grid";this.canActivate=ko.observable(!1);this.remarks=ko.observable();this.hasAddPermission=ko.observable(i.isOperationAllowed(i.permissions.create,i.categories.messageTemplateManager));this.hasEditPermission=ko.observable(i.isOperationAllowed(i.permissions.update,i.categories.messageTemplateManager));this.hasActivatePermission=ko.observable(i.isOperationAllowed(i.permissions.activate,i.categories.messageTemplateManager));this.hasViewPermission=ko.observable(i.isOperationAllowed(i.permissions.view,i.categories.messageTemplateManager));this.compositionComplete=function(n){return function(){return $(function(){return $(n.gridId).on("gridLoad selectionChange",function(t,i){return n.rowId(i.id),n.canActivate(i.data.Status==="Inactive")})})}}(this);this.onMessageTemplateChange=function(n){return function(){return $(n.gridId).trigger("reload")}}(this);$(document).on("message_template_changed",this.onMessageTemplateChange);this.detached=function(n){return function(){return $(document).off("message_template_changed",n.onMessageTemplateChange)}}(this)}return t(o,n),o.prototype.statusFormatter=function(){return r.t("common.statuses."+this.Status)},o.prototype.messageTypeFormatter=function(){return r.t("messageTemplates.messageTypes."+this.MessageType)},o.prototype.messageDeliveryMethodFormatter=function(){return r.t("messageTemplates.deliveryMethods."+this.MessageDeliveryMethod)},o.prototype.openAddTab=function(){return u.open({path:"messaging/message-templates/add",title:r.t("app:common.new")})},o.prototype.openViewTab=function(){var n;return n=this.rowId(),n!=null?u.open({path:"messaging/message-templates/view",title:r.t("app:common.view"),data:{id:n}}):void 0},o.prototype.openEditTab=function(){var n;return n=this.rowId(),n!=null?u.open({path:"messaging/message-templates/edit",title:r.t("app:common.edit"),data:{id:n}}):void 0},o.prototype.openActivateDialog=function(){var t,n;return n=this.rowId(),n&&this.canActivate()?(t=new f(n),t.show(),null):void 0},o}(n("vmGrid"))})}).call(this);