(function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};define(function(t){var r,e,o,u,f;return f=t("nav"),u=t("i18next"),e=t("base/base-view-model"),o=t("messaging/message-templates/models/edit-template-model"),r=t("ace-editor"),function(t){function e(){this.activate=n(this.activate,this);e.__super__.constructor.apply(this,arguments);this.SavePath="/MessageTemplate/Edit";this.Model=new o}return i(e,t),e.prototype.handleSaveFailure=function(n){var e,r,t,i,o,f;if(t=n!=null?n.fields:void 0,t!=null){for(f=[],i=0,o=t.length;i<o;i++)r=t[i],e=r.errors[0],f.push(this.setError(this.Model[r.name],u.t("app:messageTemplates.validation."+e)));return f}},e.prototype.onsave=function(){return $(document).trigger("message_template_changed"),f.close(),f.open({path:"messaging/message-templates/view",title:u.t("app:common.view"),data:{id:this.Model.id()}})},e.prototype.activate=function(n){return e.__super__.activate.apply(this,arguments),$.get("/MessageTemplate/Edit?id="+n.id).done(function(t){return function(i){return t.Model.id(n.id),t.Model.licenseeName(i.licenseeName),t.Model.brandName(i.brandName),t.Model.languageName(i.languageName),t.Model.messageType(i.messageType),t.Model.messageDeliveryMethod(i.messageDeliveryMethod),t.Model.templateName(i.templateName),t.Model.subject(i.subject),t.Model.messageContent(i.messageContent),t.subjectEditorId="edit-template-subject-"+n.id,t.messageEditorId="edit-template-message-"+n.id}}(this))},e.prototype.compositionComplete=function(){return new r(this.subjectEditorId,this.Model.subject,!0,!0),new r(this.messageEditorId,this.Model.messageContent,!0,!1)},e}(e)})}).call(this);