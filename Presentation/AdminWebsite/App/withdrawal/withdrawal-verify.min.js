(function(){define(function(n){var i,r,t;return i=n("i18next"),r=n("nav"),t=n("withdrawal/withdrawal-log-dialog"),function(){function n(){this.id=ko.observable();this.licenseeName=ko.observable();this.brandName=ko.observable();this.username=ko.observable();this.referenceCode=ko.observable();this.status=ko.observable();this.internalAccount=ko.observable();this.currency=ko.observable();this.paymentMethod=ko.observable();this.amount=ko.observable();this.submittedBy=ko.observable();this.dateSubmitted=ko.observable();this.bankName=ko.observable();this.bankAccountName=ko.observable();this.bankAccountNumber=ko.observable();this.branch=ko.observable();this.swiftCode=ko.observable();this.address=ko.observable();this.city=ko.observable();this.province=ko.observable();this.remarks=ko.observable();this.queueWeMadeTheCallFrom=ko.observable();this.message=ko.observable();this.messageCss=ko.observable();this.isSubmitted=ko.observable(!1);this.event=ko.observable();this.gridId=ko.observable();this.hasAutoVerification=ko.observable(!1);this.autoVerificationStatus=ko.observable();this.autoVerificationDate=ko.observable();this.hasRiskLevel=ko.observable(!1);this.riskLevelStatus=ko.observable();this.riskLevelDate=ko.observable();this.hasVerificationQueue=ko.observable(!1);this.verificationQueueResult=ko.observable();this.verificationHandledBy=ko.observable();this.verificationDateHandled=ko.observable();this.hasOnHoldQueue=ko.observable(!1);this.OnHoldResult=ko.observable();this.OnHoldHandledBy=ko.observable();this.OnHoldDateHandled=ko.observable();this.hasDocuments=ko.observable(!1);this.documentsStatus=ko.observable();this.documentsDate=ko.observable();this.hasInvestigation=ko.observable(!1);this.investigationStatus=ko.observable();this.investigationDate=ko.observable();this.submitLabel=ko.observable("Submit");this.adminRemarks=ko.observableArray();this.playerRemarks=ko.observableArray();this.officer=ko.observable()}return n.prototype.activate=function(n){return this.id(n.id),this.event(n.event),this.gridId(n.gridId),this.loadInfo(),this.queueWeMadeTheCallFrom(n.queueName)},n.prototype.loadInfo=function(){return $.ajax("OfflineWithdraw/WithdrawalInfo?id="+this.id()).done(function(n){return function(t){return n.licenseeName(t.baseInfo.licensee),n.brandName(t.baseInfo.brand),n.username(t.baseInfo.username),n.referenceCode(t.baseInfo.referenceCode),n.status(t.baseInfo.status),n.internalAccount(t.baseInfo.internalAccount),n.currency(t.baseInfo.currency),n.paymentMethod(t.baseInfo.paymentMethod),n.amount(t.baseInfo.amount),n.submittedBy(t.baseInfo.submitted),n.dateSubmitted(t.baseInfo.dateSubmitted),n.bankName(t.bankInformation.bankName),n.bankAccountName(t.bankInformation.bankAccountName),n.bankAccountNumber(t.bankInformation.bankAccountNumber),n.branch(t.bankInformation.branch),n.swiftCode(t.bankInformation.swiftCode),n.address(t.bankInformation.address),n.city(t.bankInformation.city),n.province(t.bankInformation.province),n.hasAutoVerification(t.processInformation.autoVerification.hasAutoVerification),n.autoVerificationStatus(t.processInformation.autoVerification.status),n.autoVerificationDate(t.processInformation.autoVerification.date),n.hasRiskLevel(t.processInformation.riskLevel.hasRiskLevel),n.riskLevelStatus(t.processInformation.riskLevel.status),n.riskLevelDate(t.processInformation.riskLevel.date),n.hasVerificationQueue(t.processInformation.verificationQueue.hasResult),n.verificationQueueResult(t.processInformation.verificationQueue.result),n.verificationHandledBy(t.processInformation.verificationQueue.handledBy),n.verificationDateHandled(t.processInformation.verificationQueue.dateHandled),n.hasOnHoldQueue(t.processInformation.onHoldQueue.hasResult),n.OnHoldResult(t.processInformation.onHoldQueue.result),n.OnHoldHandledBy(t.processInformation.onHoldQueue.handledBy),n.OnHoldDateHandled(t.processInformation.onHoldQueue.dateHandled),n.adminRemarks(t.remarks.adminRemarks),n.playerRemarks(t.remarks.playerRemarks),n.officer(t.officer)}}(this))},n.prototype.reloadGrid=function(){return $(this.gridId()).trigger("reload")},n.prototype.submit=function(){var n,t,u,r;return n=this,r="",t="",this.event()==="cancel"&&(r="offlinewithdraw/CancelRequest",t="Canceled"),this.event()==="unverify"&&(r="offlinewithdraw/unverify",t="Unverified"),this.event()==="verify"&&(r="offlinewithdraw/verify",t="Verified"),this.event()==="accept"&&(r="offlinewithdraw/accept",t="Accepted"),this.event()==="revert"&&(r="offlinewithdraw/revert",t="Reverted"),this.event()==="release"&&(r="offlinewithdraw/Approve",t="Released"),this.event()==="documents"&&(r="offlinewithdraw/documents",t="Documents"),this.event()==="investigate"&&(r="offlinewithdraw/investigate",t="Investigate"),u=this.event(),$.post(r,{requestId:this.id(),remarks:this.remarks()}).done(function(r){return n.adminRemarks.splice(0,0,{user:n.officer,remark:n.remarks}),n.message(i.t(r.data)),r.result==="success"?($(document).trigger(n.getEventByName(u)),n.messageCss("alert alert-success left"),n.isSubmitted(!0),n.status(t)):n.messageCss("alert alert-danger left"),n.event()==="release"?n.reloadAfterReleaseProcessed():n.reloadGrid()})},n.prototype.reloadAfterReleaseProcessed=function(){var n,t,i;return t=this,i=0,n=function(){return $.get("offlinewithdraw/get?id="+t.id()).done(function(){return function(r){return r.data.status===9?(clearTimeout(i),t.reloadGrid()):i=setTimeout(n,5e3)}}(this))},n()},n.prototype.close=function(){return r.close()},n.prototype.clear=function(){return this.remarks("")},n.prototype.getEventByName=function(n){return(n==="cancel"||n==="accept")&&this.gridId()==="#accept-grid"?"acceptance_queue_changed":(n==="cancel"||n==="release")&&this.gridId()==="#release-grid"?"release_queue_changed":void 0},n.prototype.avcStatus=function(){var n,i;return i=this.id(),n=new t(i,"/OfflineWithdraw/AutoVerificationStatus"),n.show()},n.prototype.rvcStatus=function(){var n,i;return i=this.id(),n=new t(i,"/OfflineWithdraw/RiskProfileCheckStatus"),n.show()},n}()})}).call(this);