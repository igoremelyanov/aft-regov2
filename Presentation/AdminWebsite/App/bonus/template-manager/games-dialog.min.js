(function(){define(["plugins/dialog"],function(n){var t;return t=function(){function n(n){this.GameId=ko.observable(n.Id);this.Name=ko.observable(n.Name);this.ProductId=ko.observable(n.ProductId);this.ProductName=ko.observable(n.ProductName);this.Contribution=ko.observable(100)}return n}(),function(){function i(n,t){this.games=n;this.contributions=t;this.products=ko.computed(function(n){return function(){var t;return t=[],ko.utils.arrayFilter(n.games(),function(n){return t.indexOf(n.ProductId)===-1&&t.push(n.ProductId)})}}(this));this.productId=ko.observable();this.availableGames=ko.computed(function(n){return function(){return ko.utils.arrayFilter(n.games(),function(t){return t.ProductId===n.productId()})}}(this));this.internallySelected=ko.observableArray();this.filteredGames=ko.computed({read:function(n){return function(){return ko.utils.arrayFilter(n.internallySelected(),function(t){return t.ProductId===n.productId()})}}(this),write:function(n){return function(t){var i,f,r,u,o,s,e;for(f=n.internallySelected().filter(function(t){return t.ProductId===n.productId()}),r=0,o=f.length;r<o;r++)i=f[r],n.internallySelected.remove(i);for(e=[],u=0,s=t.length;u<s;u++)i=t[u],e.push(n.internallySelected.push(i));return e}}(this)});this.contributions.subscribe(function(n){return function(){var f,i,t,e,r,u;for(n.productId(n.products()[0].ProductId),u=[],r=n.contributions(),t=0,e=r.length;t<e;t++)f=r[t],i=ko.utils.arrayFirst(n.availableGames(),function(n){return n.Id===f.GameId()}),i!=null&&u.push(i);return n.internallySelected(u)}}(this))}return i.prototype.ok=function(){var i,r,u,n,o,f,e;for(i=[],e=this.internallySelected(),n=0,o=e.length;n<o;n++)u=e[n],f=new t(u),r=ko.utils.arrayFirst(this.contributions(),function(n){return n.GameId()===u.Id}),r!=null&&f.Contribution(r.Contribution()),i.push(f);return this.contributions(i),this.close()},i.prototype.cancel=function(){return this.contributions.valueHasMutated(),this.close()},i.prototype.show=function(){return n.show(this)},i.prototype.close=function(){return n.close(this)},i}()})}).call(this);
//# sourceMappingURL=games-dialog.min.js.map
