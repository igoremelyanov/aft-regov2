(function(){define(["i18next","bonus/bonusCommon","./changeTracker"],function(n,t,i){return function(){function r(r,u){var f;this.ParentBonusId=ko.observable();this.PlayerRegistrationDateFrom=ko.observable();this.PlayerRegistrationDateTo=ko.observable();this.WithinRegistrationDays=ko.observable(0);this.VipLevels=ko.observableArray([]);this.ExcludeOperation=ko.observable(0);this.ExcludeBonuses=ko.observableArray();this.ExcludeRiskLevels=ko.observableArray();this.PlayerRedemptionsLimit=ko.observable(0);this.PlayerRedemptionsLimitType=ko.observable(0);this.RedemptionsLimit=ko.observable(0);this.bonuses=ko.observableArray(u);this.riskLevels=ko.computed(function(){var n;if((n=r())!=null)return n.RiskLevels});this.availableVips=ko.computed(function(){var n;if((n=r())!=null)return n.VipLevels});this.availableExcOperations=function(){var t,u,i,r;for(i=[0,1],r=[],t=0,u=i.length;t<u;t++)f=i[t],r.push({id:f,name:n.t("bonus.operations."+f)});return r}();this.vWithinRegistrationDays=ko.computed({read:function(n){return function(){return n.WithinRegistrationDays()===0?"":n.WithinRegistrationDays()}}(this),write:this.WithinRegistrationDays});this.vPlayerRedemptionsLimit=ko.computed({read:function(n){return function(){return n.PlayerRedemptionsLimit()===0?"":n.PlayerRedemptionsLimit()}}(this),write:this.PlayerRedemptionsLimit});this.vRedemptionsLimit=ko.computed({read:function(n){return function(){return n.RedemptionsLimit()===0?"":n.RedemptionsLimit()}}(this),write:this.RedemptionsLimit});this.availablePlayerRedemptionsLimitTypes=ko.computed(function(){var t,i;for(i=[],f=t=0;t<=3;f=++t)i.push({id:f,name:n.t("bonus.playerRedemptionsLimitTypes."+f)});return i});this.playerRedemptionsLimitTypeString=ko.observable();this.selectPlayerRedemptionsLimitType=function(t){return function(i){return t.playerRedemptionsLimitTypeString(n.t("bonus.playerRedemptionsLimitTypes."+i)),t.PlayerRedemptionsLimitType(i)}}(this);this.selectPlayerRedemptionsLimitType(this.PlayerRedemptionsLimitType());this.vVipLevels=ko.observableArray([]).extend({arrayNotEmpty:{message:n.t("bonus.messages.noVip")}});r.subscribe(function(n){return function(){var t;if(n.availableVips()!==void 0)return n.VipLevels().length===0?n.vVipLevels(function(){var n,u,i,r;for(i=this.availableVips(),r=[],n=0,u=i.length;n<u;n++)t=i[n],r.push(t.Code);return r}.call(n)):n.vVipLevels(n.VipLevels())}}(this));this.emptyCaption=t.emptyCaption;new i(this);ko.validation.group(this)}return r}()})}).call(this);