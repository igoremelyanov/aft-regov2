(function(){define(["bonus/bonusCommon","./changeTracker","i18next"],function(n,t,i){return function(){function r(r){var u,f;this.availableLicensees=r;this.LicenseeId=ko.observable();this.BrandId=ko.observable();this.Name=ko.observable().extend({required:n.requireValidator,pattern:n.nameValidator});this.TemplateType=ko.observable();this.Description=ko.observable();this.WalletTemplateId=ko.observable();this.IsWithdrawable=ko.observable(!1);this.IsWithdrawable.ForEditing=ko.computed({read:function(n){return function(){return n.IsWithdrawable().toString()}}(this),write:function(n){return function(t){return n.IsWithdrawable(t==="true")}}(this)});u=i.t("bonus.issuanceModes",{returnObjectTrees:!0});this.allModes=function(){var n=[];for(f in u)n.push({id:f,name:u[f]});return n}();this.availableModes=ko.computed(function(t){return function(){var f,i,e,r,u;if(t.TemplateType()!==n.allTypes[5].id&&t.TemplateType()!==n.allTypes[0].id&&t.TemplateType()!==n.allTypes[1].id){for(r=[0,2,3],u=[],i=0,e=r.length;i<e;i++)f=r[i],u.push(t.allModes[f]);return u}return t.allModes}}(this));this.Mode=ko.observable();this.availableTypes=n.availableTypes;this.availableBrands=ko.computed(function(n){return function(){var i,t;if(t=n.LicenseeId(),t!==null&&t!==void 0)return i=ko.utils.arrayFirst(n.availableLicensees,function(n){return n.Id===t}),i.Brands}}(this));this.currentBrand=ko.computed(function(n){return function(){var t;if(t=n.BrandId(),t!==null&&t!==void 0)return ko.utils.arrayFirst(n.availableBrands(),function(n){return n.Id===t})}}(this));this.availableWallets=ko.computed(function(n){return function(){var t;if((t=n.currentBrand())!=null)return t.WalletTemplates}}(this));this.allowChangeType=ko.observable(!0);this.allowChangeBrand=ko.observable(!0);new t(this);ko.validation.group(this)}return r}()})}).call(this);