(function(){var n=function(n,t){return function(){return n.apply(t,arguments)}};define(["komapping","bonus/bonusCommon"],function(t,i){return function(){function r(r){this.objectToTrack=r;this.markCurrentStateAsClean=n(this.markCurrentStateAsClean,this);this.hashFunction=t.toJSON;this.ignored=i.getIgnoredFieldNames(r);this.ignored.push("tracker");this.lastCleanState=ko.observable(this.hashFunction(r,{ignore:this.ignored}));this.isInitiallyDirty=ko.observable(!0);this.isDirty=ko.dependentObservable(function(n){return function(){return n.isInitiallyDirty()||n.hashFunction(r,{ignore:n.ignored})!==n.lastCleanState()}}(this));r.tracker=this}return r.prototype.markCurrentStateAsClean=function(){return this.lastCleanState(this.hashFunction(this.objectToTrack,{ignore:this.ignored})),this.isInitiallyDirty(!1)},r}()})}).call(this);