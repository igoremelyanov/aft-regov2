// Generated by IcedCoffeeScript 108.0.9
(function() {
  define(['plugins/dialog', 'config'], function(dialog, config) {
    var ActivateDeactivateBonusModal;
    return ActivateDeactivateBonusModal = (function() {
      function ActivateDeactivateBonusModal(bonusId) {
        var _ref;
        this.bonusId = bonusId;
        _ref = ko.observables(), this.remarks = _ref[0], this.isActive = _ref[1], this.error = _ref[2];
      }

      ActivateDeactivateBonusModal.prototype.ok = function() {
        return $.ajax({
          type: "POST",
          url: config.adminApi("Bonus/ChangeStatus"),
          data: ko.toJSON({
            id: this.bonusId,
            isActive: this.isActive(),
            remarks: this.remarks()
          }),
          contentType: "application/json"
        }).done((function(_this) {
          return function(data) {
            if (data.Success === false) {
              return _this.error(data.Errors[0].ErrorMessage);
            } else {
              $(document).trigger("bonuses_changed");
              return _this.cancel();
            }
          };
        })(this));
      };

      ActivateDeactivateBonusModal.prototype.cancel = function() {
        return dialog.close(this);
      };

      ActivateDeactivateBonusModal.prototype.show = function(isActive) {
        this.isActive(isActive);
        return dialog.show(this);
      };

      return ActivateDeactivateBonusModal;

    })();
  });

}).call(this);
