(function(){define(function(n){var r,t,i,u;return n("controls/grid"),u=n("nav"),r=n("player-manager/info/remarks-dialog/remarks-dialog"),i=n("player-manager/info/confirm-dialog/confirm-dialog"),t=n("config"),function(){function f(){this.moment=n("moment");this.config=n("config");this.playerId=ko.observable();this.selectedRowId=ko.observable();this.status=ko.observable();this.verifyEnabled=ko.computed(function(n){return function(){return n.selectedRowId()&&n.status()==="Pending"}}(this));this.unverifyEnabled=ko.computed(function(n){return function(){return n.selectedRowId()&&n.status()==="Pending"}}(this))}return f.prototype.activate=function(n){return this.playerId(n.playerId)},f.prototype.attached=function(n){var t,i;i=this;t=findGrid(n);$("form",n).submit(function(){return t.trigger("reload"),!1});$(n).on("click",".identity-remark",function(){var n,i;return n=$(this).parents("tr").first().attr("id"),i=$(this).attr("title"),new r(n,i).show(function(){return t.trigger("reload")})});return $(n).on("click",".jqgrow",function(){var n,r;return i.selectedRowId($(this).attr("id")),r=t.find(".ui-jqgrid-btable"),n=r.jqGrid("getRowData",i.selectedRowId()),i.status(n.VerificationStatus)})},f.prototype.upload=function(){return u.open({path:"player-manager/documents-upload/upload-identification-doc",title:"Upload document",data:{playerId:this.playerId()}})},f.prototype.verify=function(){var n;return n=new i(function(n){return function(i,r){return $.ajax(t.adminApi("PlayerInfo/VerifyIdDocument"),{type:"post",data:ko.toJSON({id:n.selectedRowId()}),contentType:"application/json",success:function(n){if(n.result==="success"){if($("#id-documents-grid").trigger("reload"),i)return i()}else if(r)return r(n.data)}})}}(this),"Are you sure you want to verify player's submitted documents?","Documents have been sucessfully verified."),n.show()},f.prototype.unverify=function(){var n;return n=new i(function(n){return function(i){return $.ajax(t.adminApi("PlayerInfo/UnverifyIdDocument"),{type:"post",data:ko.toJSON({id:n.selectedRowId()}),contentType:"application/json",success:function(){return $("#id-documents-grid").trigger("reload"),i?i():void 0}})}}(this),"Are you sure you want to unverify player's submitted documents?","Documents have been sucessfully unverified."),n.show()},f}()})}).call(this);